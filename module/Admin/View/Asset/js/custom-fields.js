"use strict";class CustomField{constructor(e){this.node=e,this.name=null==(e=this.node.getAttribute("name"))?void 0:e.replace("[]",""),this.store=document.querySelector('#page-custom-fields [name="custom_fields"]'),this.name&&this.initialize()}initialize(){var e=this.getStoreValue()[this.name];this.populateField(e)}getStoreValue(){var e;return null!=(e=this.store)&&null!=(e=e.value)&&e.length?JSON.parse(this.store.value):{}}populateField(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return"file"===this.node.getAttribute("type")?this.populateFile(e):this.node.value=e,!0}populateFile(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!e||!e.length)return!1;let t=[],i="["===e[0]?JSON.parse(e):[e];return i.forEach(e=>{t.push({value:e,poster:BASE_URL+"/"+e})}),this.node.setAttribute("data-value",JSON.stringify(t)),!0}}document.querySelectorAll("#page-custom-fields [name]").forEach(e=>{if("custom_fields"===e.name||e.closest(".foreign-form__body"))return!1;new CustomField(e)});